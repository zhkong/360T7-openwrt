# ============================================================
# OpenWrt ImageBuilder 软件包配置
# 用于 360T7 (MediaTek Filogic MT7981) 设备
# ============================================================

# 设备配置
TARGET="mediatek"
SUBTARGET="filogic"
PROFILE="qihoo_360t7"

# ==================== 要安装的软件包 ====================

# LuCI Web 界面
PACKAGES_LUCI="
    luci
    luci-ssl
    luci-app-firewall
    luci-app-package-manager
    luci-mod-admin-full
    luci-mod-network
    luci-mod-status
    luci-mod-system
    luci-theme-bootstrap
    luci-proto-ipv6
    luci-proto-ppp
"

# RPCD 模块 (LuCI 和 CPU 状态显示需要)
PACKAGES_RPCD="
    rpcd-mod-file
    rpcd-mod-luci
    rpcd-mod-rrdns
    rpcd-mod-ucode
"

# 中文语言包
PACKAGES_LANG_ZH="
    luci-i18n-base-zh-cn
    luci-i18n-firewall-zh-cn
    luci-i18n-package-manager-zh-cn
    luci-i18n-ttyd-zh-cn
    luci-i18n-ttyd-zh-hans
"

# 系统工具
PACKAGES_TOOLS="
    btop
    iperf3
    ttyd
    zsh
"

# LuCI 应用
PACKAGES_LUCI_APPS="
    luci-app-ttyd
"

# 可选：额外软件包（取消注释启用）
PACKAGES_EXTRA="
    # htop
    # nano
    # curl
    # wget
    # tcpdump
"

# ==================== 要移除的软件包 ====================

# 无线相关包（旁路由模式不需要）
PACKAGES_DISABLED="
    -wpad-basic-mbedtls
    -hostapd-common
    -kmod-mt7915e
    -kmod-mt7981-firmware
    -kmod-mac80211
    -kmod-cfg80211
    -wifi-scripts
    -wireless-regdb
    -iw
    -iwinfo
"

# ==================== 辅助函数 ====================

# 获取所有要安装的包（合并并清理空行）
get_install_packages() {
    echo "$PACKAGES_LUCI $PACKAGES_RPCD $PACKAGES_LANG_ZH $PACKAGES_NETWORK $PACKAGES_TOOLS $PACKAGES_LUCI_APPS $PACKAGES_EXTRA" | tr '\n' ' ' | sed 's/#[^"]*//g' | tr -s ' '
}

# 获取所有要禁用的包
get_disabled_packages() {
    echo "$PACKAGES_DISABLED" | tr '\n' ' ' | tr -s ' '
}

# 获取完整的包列表
get_all_packages() {
    echo "$(get_install_packages) $(get_disabled_packages)"
}
